(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),i=n(12),l=n(8),u=n.n(l),s=n(15),m=n(32),p=n.n(m),f=null,g={getAll:function(){return p.a.get("/api/blogs").then(function(e){return e.data})},setToken:function(e){f="bearer ".concat(e)},create:function(){var e=Object(s.a)(u.a.mark(function e(t){var n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,p.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(u.a.mark(function e(t,n){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat("/api/blogs","/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(u.a.mark(function e(t){var n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,p.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},b={login:function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},d=function(){return p.a.get("/api/users").then(function(e){return e.data})},E=n(10);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){Object(E.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(){return function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"INIT_BLOGS_PENDING"}),e.prev=1,e.next=4,g.getAll();case 4:n=e.sent,t({type:"INIT_BLOGS_SUCCESS",data:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"INIT_BLOGS_FAILURE",error:e.t0});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},y=n(19),j=n(75),w=n(164),N=n(165),x=n(44),k=n(166),I=n(25),S=n(181),T=n(163),C=n(161),D=n(74),_=n.n(D),B=function(e){var t=r.a.useState(null),n=Object(I.a)(t,2),a=n[0],c=n[1],o=function(){c(null)};return r.a.createElement("div",null,r.a.createElement(C.a,{edge:"start",className:e.className,color:"inherit","aria-label":"menu",onClick:function(e){c(e.currentTarget)}},r.a.createElement(_.a,null)),r.a.createElement(S.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:o},r.a.createElement(T.a,{onClick:o},"Profile"),r.a.createElement(T.a,{onClick:o},"My account"),r.a.createElement(T.a,{onClick:o},"Logout")))},P=Object(j.a)(function(e){return{root:{flexGrow:1,width:"100%",margin:"0 auto",paddingBottom:5,position:"fixed",alignItems:"center",top:0,left:0,right:0,zIndex:1e3},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textDecoration:"none"}}}),L=Object(i.b)(function(e){return{auth:e.auth}})(function(e){var t=P();return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{position:"static"},r.a.createElement(N.a,null,r.a.createElement(B,{className:t.menuButton}),r.a.createElement(x.a,{variant:"h6",className:t.title,color:"inherit",component:y.b,to:"/"},"Blogs"),r.a.createElement("div",{style:{textDecoration:"none"}},r.a.createElement(k.a,{color:"inherit",component:y.b,to:"/"},"Home"),r.a.createElement(k.a,{color:"inherit",component:y.b,to:"/blogs"},"Blogs"),r.a.createElement(k.a,{color:"inherit",component:y.b,to:"/users"},"Users"),e.auth?r.a.createElement(k.a,{onClick:function(){window.localStorage.removeItem("loggedUser"),window.location.reload()},color:"inherit"},"Logout"):r.a.createElement(k.a,{color:"inherit",component:y.b,to:"/login"},"Login")))))}),U=n(79),A=n.n(U),G=n(80),R=n.n(G),F=n(78),z=n.n(F),M=n(77),V=n.n(M),J=n(81),W=n.n(J),H=n(185),K=n(169),q=n(167),Q=n(168),X=n(3),Y=function(e,t){return{type:"SET_NOTIFICATION",data:{status:!0,content:e,category:t}}},Z=function(){return{type:"CLEAR_NOTIFICATION",data:{status:!1,content:"",category:""}}},$={clearNotification:Z,setTimedNotification:function(e,t,n){return function(){var a=Object(s.a)(u.a.mark(function a(r){return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:Y(e,t),setTimeout(function(){return Z},1e3*n);case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}},ee=Object(i.b)(function(e){return{notification:e.notification}},$)(function(e){var t=Object(j.a)(function(e){return{success:{backgroundColor:q.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Q.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}),n={success:V.a,warning:z.a,error:A.a,info:R.a},a=t(),c=e.notification.category?n[e.notification.category]:n.info;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},key:"bottom, center",open:e.notification.status,onClose:e.clearNotification,autoHideDuration:3e3,ContentProps:{"aria-describedby":"message-id"}},r.a.createElement(K.a,{className:a[e.notification.category],"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(c,{className:Object(X.a)(a.icon,a.iconVariant)}),e.notification.content),action:[r.a.createElement(C.a,{key:"close","aria-label":"close",color:"inherit",onClick:e.clearNotification},r.a.createElement(W.a,{className:a.icon}))]})))}),te=n(36),ne=n(180),ae=n(170),re=n(171),ce=n(183),oe=n(184),ie=n(172),le=n(173),ue=function(e){var t=e.password,n=e.icon,a=e.label,c=e.value,o=e.onChange;return r.a.createElement(ae.a,{item:!0},r.a.createElement(re.a,null,r.a.createElement(ce.a,{htmlFor:"input-with-icon-adornment"},a),r.a.createElement(oe.a,{id:"input-with-icon-adornment",type:t?"password":"text",startAdornment:r.a.createElement(ie.a,{position:"start"},r.a.createElement(le.a,null,n)),value:c,onChange:o})))},se=Object(j.a)(function(e){return{loginBox:{width:"40%",padding:"50px",margin:"10% auto"},submit:{margin:e.spacing(3,0,2)}}}),me={login:function(e,t){return function(){var n=Object(s.a)(u.a.mark(function n(a){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.login({username:e,password:t});case 2:r=n.sent,g.setToken(r.token),window.localStorage.setItem("loggedUser",JSON.stringify(r)),a({type:"LOGIN",data:r});case 6:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},setNotification:Y},pe=Object(i.b)(function(e){return{user:e.user}},me)(function(e){var t=Object(a.useState)(""),n=Object(I.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),l=Object(I.a)(i,2),u=l[0],s=l[1],m=Object(te.g)(),p=se();return r.a.createElement(ne.a,{className:p.loginBox,boxShadow:3},r.a.createElement(ae.a,{container:!0,alignItems:"center",spacing:3,justify:"center"},r.a.createElement(ae.a,{item:!0},r.a.createElement(x.a,{variant:"h5"},"Login")),r.a.createElement(ae.a,{container:!0,alignItems:"center",justify:"center",spacing:3},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();try{e.login(c,u),o(""),s(""),m.push("/")}catch(n){e.setNotification("error","An error has occured."),console.error(n)}}},r.a.createElement(ae.a,{item:!0},r.a.createElement(ue,{label:"Username",icon:"account_circle",value:c,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement(ae.a,{item:!0},r.a.createElement(ue,{label:"Password",icon:"vpn_key",value:u,password:!0,onChange:function(e){var t=e.target;return s(t.value)}})),r.a.createElement(ae.a,{item:!0,m:5},r.a.createElement(k.a,{className:p.submit,variant:"contained",color:"primary",type:"submit"},"Login"))))))}),fe=n(2),ge=n(86),be=Object(j.a)(function(e){return{box:{width:"60%",margin:"0 auto",paddingTop:"5.8572em"}}}),de=function(e){var t=be();return r.a.createElement(ae.a,{className:t.box,container:!0,alignItems:"center",spacing:2},e.children)},Ee=n(82),he=n.n(Ee),Oe=n(83),ve=n.n(Oe),ye=n(162),je=n(126),we=n(177),Ne=n(176),xe=n(174),ke=n(175),Ie=Object(j.a)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}),Se=function(e){var t=e.children,n=Ie();return r.a.createElement(ye.a,{className:n.root},r.a.createElement(je.a,{alignItems:"flex-start"},r.a.createElement(xe.a,null,r.a.createElement(ke.a,{className:n.avatar},"U")),r.a.createElement(Ne.a,{primary:"Username",secondary:r.a.createElement(r.a.Fragment,null,t)})),r.a.createElement(we.a,{variant:"inset",component:"li"}))},Te=n(18),Ce=function(e,t,n){return function(e,t,n){return[].concat(Object(Te.a)(n.slice(0,t)),[e],Object(Te.a)(n.slice(t+1)))}(e,n.findIndex(function(t){return t.id===e.id}),n)},De=Object(j.a)(function(e){return{box:{width:"100%",margin:"2% auto"},delete:{marginLeft:"auto",marginRight:-12},paper:{padding:e.spacing(2,1)}}}),_e={addVote:function(e){return function(){var t=Object(s.a)(u.a.mark(function t(n){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=O({},e,{likes:e.likes+1}),t.next=3,g.update(e.id,a);case 3:n({type:"ADD_VOTE",data:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},deleteBlog:function(e){return function(){var t=Object(s.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.remove(e);case 2:n({type:"DELETE_BLOG",data:{id:e}});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},Be=Object(te.h)(Object(i.b)(null,_e)(function(e){var t=e.blog,n=e.full,a=void 0!==n&&n,c=Object(fe.a)(e,["blog","full"]),o=JSON.parse(window.localStorage.getItem("loggedUser")),i=De();return r.a.createElement(de,null,r.a.createElement(ae.a,{item:!0,className:i.box},r.a.createElement(ge.a,{className:i.paper},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{variant:"h5"},t.title),r.a.createElement(x.a,{paragraph:!0},t.content),r.a.createElement(x.a,{align:"center"},r.a.createElement(C.a,{onClick:function(){return c.addVote(t)}},r.a.createElement(he.a,null)),t.likes),r.a.createElement(x.a,{variant:"subtitle1",align:"right"},t.author),o.username===t.user.username?r.a.createElement(C.a,{className:i.delete,onClick:function(){c.deleteBlog(t.id),c.history.push("/blogs")}},r.a.createElement(ve.a,null)):"",r.a.createElement(ae.a,{container:!0},r.a.createElement(x.a,{variant:"h6"},"Comments"),t.comments.map(function(e){return r.a.createElement(Se,{key:"_"+Math.random().toString(36).substr(2,9)},e)}))):r.a.createElement(x.a,{variant:"h5",onClick:function(){return c.history.push("/blogs/".concat(t.id))}},t.title))))})),Pe=Object(j.a)(function(e){return{box:{width:"60%",margin:"3% auto"},paper:{width:"60%",margin:e.spacing(2,3),padding:e.spacing(4,3)},item:{margin:e.spacing(2,3)}}}),Le=function(e){var t=e.children,n=e.title,a=e.onSubmit,c=Pe();return r.a.createElement(ae.a,{container:!0,alignItems:"center",justify:"center",spacing:3,className:c.box},r.a.createElement(ge.a,{className:c.paper},r.a.createElement(ae.a,{item:!0,className:c.item},r.a.createElement(x.a,{variant:"h5"},n)),r.a.createElement(ae.a,{container:!0,alignItems:"center",justify:"center",spacing:3},r.a.createElement("form",{onSubmit:a},t))))},Ue=Object(j.a)(function(e){return{item:{margin:e.spacing(2,3)}}}),Ae={addBlog:function(e){return function(){var t=Object(s.a)(u.a.mark(function t(n){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.create(e);case 2:a=t.sent,n({type:"ADD_BLOG",data:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},setNotification:Y},Ge=Object(i.b)(function(e){return{user:e.auth}},Ae)(function(e){var t=Ue(),n=Object(a.useState)(""),c=Object(I.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(""),u=Object(I.a)(l,2),s=u[0],m=u[1],p=Object(a.useState)(""),f=Object(I.a)(p,2),g=f[0],b=f[1];return r.a.createElement(Le,{onSubmit:function(t){t.preventDefault();var n={title:o,author:e.user.name,content:s,url:g,user:e.user.username};try{e.addBlog(n),e.setNotification("Blog succesfully added","success")}catch(t){console.error(t),e.setNotification("An error has occured","error")}}},r.a.createElement(ue,{label:"Title",icon:"title",value:o,onChange:function(e){var t=e.target;return i(t.value)}}),r.a.createElement(ue,{label:"Content",icon:"subject",value:s,onChange:function(e){var t=e.target;return m(t.value)}}),r.a.createElement(ue,{label:"URL",icon:"link",value:g,onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement(k.a,{className:t.item,variant:"contained",color:"primary",type:"submit"},"submit"))}),Re=n(178),Fe=Object(j.a)(function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},spinnerWrapper:{flex:1,marginTop:240,justifyContent:"center",alignItems:"center"},spinner:{flex:1,alignSelf:"center"}}}),ze={initializeBlogs:v},Me=Object(i.b)(function(e){return{blogs:e.blogs.blogs,pending:e.blogs.pending}},ze)(function(e){var t=Fe();Object(a.useEffect)(function(){e.initializeBlogs()},[]);return r.a.createElement(de,{className:t.root},e.pending?r.a.createElement(de,{className:t.spinnerWrapper},r.a.createElement(ae.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"50vh"}},r.a.createElement(Re.a,null))):e.blogs.map(function(e){return r.a.createElement(Be,{key:e.id,blog:e})}),r.a.createElement(Ge,null))}),Ve=Object(te.h)(Object(i.b)(function(e){return{users:e.users}})(function(e){return r.a.createElement(de,null,r.a.createElement("h1",null,"Users"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Blogs"))),r.a.createElement("tbody",null,e.users.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(y.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))}))))})),Je=function(e){var t=e.user;return console.log(t),r.a.createElement(de,null,r.a.createElement("h3",null,"User ",t.name),r.a.createElement("h4",null,"added blogs: "),r.a.createElement("ul",null,t.blogs.map(function(e){return r.a.createElement("li",{key:e.id},e.title)})))},We=Object(te.h)(Object(i.b)(function(e){return{auth:e.auth}})(function(e){var t=e.auth,n=(e.children,Object(fe.a)(e,["auth","children"]));return t?r.a.createElement(te.b,n):r.a.createElement(te.a,{to:"/login"})})),He=function(e){return r.a.createElement(de,null,r.a.createElement(x.a,null,"This is sample app created to learn React"))},Ke=Object(i.b)(function(e){return{auth:e.auth,users:e.users,blogs:e.blogs}})(function(e){return r.a.createElement(te.d,null,r.a.createElement(te.b,{exact:!0,path:"/"},r.a.createElement(He,null)),r.a.createElement(te.b,{exact:!0,path:"/blogs"},r.a.createElement(Me,null)),r.a.createElement(te.b,{exact:!0,path:"/users"},r.a.createElement(Ve,null)),r.a.createElement(We,{exact:!0,path:"/users/:id",render:function(t){var n,a,c=t.match;return r.a.createElement(Je,{user:(n=e.users,a=c.params.id,n.filter(function(e){return e.id===a})[0])})}}),r.a.createElement(te.b,{exact:!0,path:"/blogs/:id",render:function(t){var n,a,c=t.match;return r.a.createElement(Be,{full:!0,blog:(n=e.blogs,a=c.params.id,n.blogs.filter(function(e){return e.id===a})[0])})}}),r.a.createElement(te.b,{exact:!0,path:"/login"},r.a.createElement(pe,null)))}),qe={setUser:function(e){return function(t){g.setToken(e.token),t({type:"SET_USER",data:e})}},initializeBlogs:v,initializeUsers:function(){return function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},Qe=Object(i.b)(null,qe)(function(e){return Object(a.useEffect)(function(){e.initializeBlogs(),e.initializeUsers()},[]),Object(a.useEffect)(function(){var t=window.localStorage.getItem("loggedUser");if(t){var n=JSON.parse(t);e.setUser(n)}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,null),r.a.createElement(y.a,null,r.a.createElement(L,null),r.a.createElement(Ke,null)))}),Xe=n(38),Ye=n(84),Ze=n(85);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach(function(t){Object(E.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tt={pending:!1,blogs:[],error:null},nt={status:!1,content:"",category:""};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var rt=[],ct=Object(Xe.combineReducers)({blogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BLOG":return et({},e,{blogs:[].concat(Object(Te.a)(e.blogs),[t.data])});case"DELETE_BLOG":return e.blogs.filter(function(e){return e.id!==t.data.id});case"UPDATE_BLOG":return null;case"ADD_VOTE":case"ADD_COMMENT":return et({},e,{blogs:Ce(t.data,t.data.id,e.blogs)});case"INIT_BLOGS_PENDING":return et({},e,{pending:!0});case"INIT_BLOGS_SUCCESS":return{pending:!1,blogs:t.data,error:null};case"INIT_BLOGS_FAILURE":return et({},e,{pending:!1,error:t.error});default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":case"CLEAR_NOTIFICATION":return t.data;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;case"SET_USER":return t.data;case"SET_TOKEN":return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(n,!0).forEach(function(t){Object(E.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{token:t.data});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}}}),ot=Object(Xe.createStore)(ct,Object(Ze.composeWithDevTools)(Object(Xe.applyMiddleware)(Ye.a))),it=n(179),lt=function(){o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{store:ot},r.a.createElement(it.a,null),r.a.createElement(Qe,null))),document.getElementById("root"))};lt(),ot.subscribe(lt)},95:function(e,t,n){e.exports=n(124)}},[[95,1,2]]]);
//# sourceMappingURL=main.ce0d9171.chunk.js.map